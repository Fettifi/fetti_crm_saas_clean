(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[429],{4615:function(e,s,a){Promise.resolve().then(a.bind(a,1584))},1584:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return d}});var t=a(3827),l=a(4090),n=a(1654);function d(){let[e,s]=(0,l.useState)([]),[a,d]=(0,l.useState)(!0),[r,c]=(0,l.useState)(null);return((0,l.useEffect)(()=>{let e=!0;async function a(){d(!0),c(null);let{data:a,error:t}=await n.O.from("leads").select("id, created_at, full_name, email, phone, state, loan_purpose, credit_band, stage, source").order("created_at",{ascending:!1}).limit(200);e&&(t?(console.error(t),c(t.message)):a&&s(a),d(!1))}a();let t=n.O.channel("leads-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"leads"},()=>{a()}).subscribe();return()=>{e=!1,n.O.removeChannel(t)}},[]),a)?(0,t.jsx)("div",{className:"text-sm text-slate-400",children:"Loading leads..."}):r?(0,t.jsxs)("div",{className:"rounded-lg border border-red-700 bg-red-900/40 px-3 py-2 text-xs text-red-200",children:["Failed to load leads: ",r]}):e.length?(0,t.jsx)("div",{className:"overflow-x-auto rounded-xl border border-slate-800 bg-slate-900/60",children:(0,t.jsxs)("table",{className:"min-w-full text-left text-xs",children:[(0,t.jsx)("thead",{className:"border-b border-slate-800 bg-slate-900/80 text-slate-300",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-3 py-2",children:"Created"}),(0,t.jsx)("th",{className:"px-3 py-2",children:"Name"}),(0,t.jsx)("th",{className:"px-3 py-2",children:"Email"}),(0,t.jsx)("th",{className:"px-3 py-2",children:"Phone"}),(0,t.jsx)("th",{className:"px-3 py-2",children:"State"}),(0,t.jsx)("th",{className:"px-3 py-2",children:"Purpose"}),(0,t.jsx)("th",{className:"px-3 py-2",children:"Credit"}),(0,t.jsx)("th",{className:"px-3 py-2",children:"Stage"}),(0,t.jsx)("th",{className:"px-3 py-2",children:"Source"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-slate-800",children:e.map(e=>{var s,a,l,n,d,r,c,i;return(0,t.jsxs)("tr",{className:"hover:bg-slate-900",children:[(0,t.jsx)("td",{className:"px-3 py-2 text-slate-400",children:e.created_at?new Date(e.created_at).toLocaleString():"—"}),(0,t.jsx)("td",{className:"px-3 py-2",children:null!==(s=e.full_name)&&void 0!==s?s:"—"}),(0,t.jsx)("td",{className:"px-3 py-2",children:null!==(a=e.email)&&void 0!==a?a:"—"}),(0,t.jsx)("td",{className:"px-3 py-2",children:null!==(l=e.phone)&&void 0!==l?l:"—"}),(0,t.jsx)("td",{className:"px-3 py-2",children:null!==(n=e.state)&&void 0!==n?n:"—"}),(0,t.jsx)("td",{className:"px-3 py-2",children:null!==(d=e.loan_purpose)&&void 0!==d?d:"—"}),(0,t.jsx)("td",{className:"px-3 py-2",children:null!==(r=e.credit_band)&&void 0!==r?r:"—"}),(0,t.jsx)("td",{className:"px-3 py-2",children:null!==(c=e.stage)&&void 0!==c?c:"New Lead"}),(0,t.jsx)("td",{className:"px-3 py-2",children:null!==(i=e.source)&&void 0!==i?i:"generated"})]},e.id)})})]})}):(0,t.jsx)("div",{className:"text-sm text-slate-400",children:"No leads yet. Connect your Fetti LeadGen app or use the Apply page to submit a test lead."})}},1654:function(e,s,a){"use strict";a.d(s,{O:function(){return d}});var t=a(140);let l="https://hgnpxdivozbmjagmshda.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhnbnB4ZGl2b3pibWphZ21zaGRhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM4NjQxODksImV4cCI6MjA3OTQ0MDE4OX0.aj6Va10UNNUUYQzNQfqA2ErUD_UvleR9I8klptAKIZU";if(!l||!n)throw Error("Missing Supabase environment variables. Set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY.");let d=(0,t.eI)(l,n);s.Z=d}},function(e){e.O(0,[140,971,69,744],function(){return e(e.s=4615)}),_N_E=e.O()}]);